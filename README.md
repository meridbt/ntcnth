## Предисловие

Будем собирать проект на Vue3.js в синтаксисе composition-api на языке TypeScript с Vite в качестве сборщика

Для того, чтобы начать проект, нужно иметь на компе установленный npm. Для этого качаем и устанавливаем node.js актуальной версии с официального сайта -> https://nodejs.org/en




## Создание проекта

Переходим в корневой каталог и инициализируем проект

```
npm create vite@latest myapp --template vue-ts
```

В интерактивном диалоге Выбираем Vue и TypeScript

После выполнения скрипта открываем терминал в созданной папке (название соответствует имени проекта), выполняем установку:
```
npm i
```
и запускаем проект:
```
npm run dev
```

> Задание 1. Очистить проект от шаблонного кода. Убрать компонент HelloWorld, иконки и т.п. Написать на стартовой странице простой текст HelloWorld




## Модули

Приложение Vue содержит механизм расширения за счёт готовых модулей, которые называются пакетами. Пакеты размещаются в репозитории. В Node.js есть несколько репозиториев и менеджеров управления пакетами. Мы будем пользоваться *npm* -> https://www.npmjs.com

Чтобы установить пакет, нужно в командной строке в корне проекта выполнить команду
```
npm i PACKAGE_NAME
```

Альтернативно, можно добавить нужный пакет в секцию *dependencies* файла *package.json* и после этого выполнить в командной строке команду
```
npm i
```
Последняя команда пригодится и в том случае, если вы начинаете работу над чужим проектом, скачанным, например, из GitHub. Данная команда обратится к файлу *package.json* и скачает в проект все необходимые зависимости в папку node_modules проекта

Большинство модулей после установки требуют инициализации. Чаще всего инициализация выполняется импортом объекта из библиотеки и передачей импортированного объекта методу `use()`. Пример инициализации vue-router:
```ts
// main.ts
import { createApp } from "vue";
import App from "./App.vue";
import router from "./router";

const app = createApp(App);

app.use(router);
app.mount("#app");
```
Информацию по инициализации конкретного пакета нужно смотреть в официальной документации




## Компоненты

Мы будем создавать однофайловые компоненты в Composition API синтакстисе

Компоненты принято размещать в папке src/components. Если проект большой, внутри можно делать дополнительную структуру каталогов по смыслу и назначению

Однофайловый компонент имеет расширение *.vue и состоит из трёх блоков - шаблон, скрипт и набор стилей:
```html
// SomeComponent.vue
<template>
  ...
</template>


<script setup lang="ts">
  ...
</script>


<style lang="css" scoped>
  ...
</style>
```
template - корневой элемент шаблона, он должен быть единственным корневым элементом. К нему не нужно применять стили

В тэге *script* появляется атрибут *setup*, это особенность composition-api.

Стили могут задаваться как на языке css (это язык по умолчанию, если атрибут lang отсутствует), так и на языках препроцессоров - *sass*, *less*. Атрибут *scoped* означает, что стили внутри блока будут применяться только к текущему компоненту.

В composition синтаксисе реактивность задаётся явно. Так, чтобы создать реактивную переменную, необходимо воспользоваться методом *ref*:
```ts
const count = ref(0);
```
Метод создаёт прокси объект, у которого есть поле value, куда монтируется текущее значение 0. Для доступа к значению ВНУТРИ typescript кода нужно обращаться именно к нему:
```ts
console.log(count.value);
count.value = 1;
```
В шаблоне реактивные переменные распаковываются автоматически:
```html
<span>{{count}}</span>
```
Компонент имеет хуки жизненного цикла, среди которых есть *onMounted* -> https://vuejs.org/api/composition-api-lifecycle.html#composition-api-lifecycle-hooks, который вызывается в момент, когда компонент примонтирован к DOM.

*ref*, *onMounted* и другие стандартные функции импортируются из пакета *vue*:
```ts
import { onMounted, ref } from 'vue';
```
> Задание 2. Установить и инициализировать bootstrap -> https://bootstrap-vue.ru/docs#использование-сборщиков-модулей. Создать компонент *Upclicker*, в компоненте описать реактивную переменную *count* с начальным значением 0. При монтировании компонента в консоль написать 'Upclicker mounted, count is {значение count}'. Значение переменной *count* вывести в блоке span в шаблоне компонента. Рядом расположить стандартную синюю bootstrap кнопку, при нажатии на которую значение переменной count увеличится на 1

> Задание 3. Создать компонент *Downclicker*, аналогичный компоненту *Upclicker*. При нажатии на кнопку значение *count* должно уменьшиться на 1. В App.vue разместить новый компонент рядом с *Upclicker*




## Динамеческое переключение компонентов

Для переключения активного компонента внутри приложения, можно воспользоваться тэгом `<component :is="currentComponent" />` или *vue-router*.
Мы рассмотрим второй вариант, поскольку у него есть преимущества в части выделения логики обработки переходов в отдельный модуль, контроля условий для перехода, передачи параметров и предоставления информации о маршруте.
Устанавливаем пакет:
```sh
npm install vue-router
```
Создаём новый каталог *src/router* и размещаем в нём файл *index.ts*:
```ts
// index.ts
import { createRouter, createWebHistory, RouteRecordRaw, Router } from "vue-router";

const routes: Array<RouteRecordRaw> = [
    {
        path: "/home",
        name: "Home",
        component: () => import("../components/Home.vue")
    }
]

const router: Router = createRouter({
    history: createWebHistory("/"),
    routes
});

export default router;
```
Обратите внимание на поле *component* - запись в таком виде позволяет динамически импортировать компоненты прямо в роутере
Запись `export default XXX` означает объект, импортируемый по умолчанию. Данная запись позволяет импортировать объект так:
```ts
import anyName from 'package_path'
```
Если модуль не имеет дефолтного экспорта или экспортирует несколько объектов, они импортируются с указанием имени объекта:
```ts
import { ObjectName, SomeOtherObjectName } from 'package_path'
```

Инициализируем роутер:
```ts
// main.ts
import router from './router'

createApp(App).use(router).mount('#app')
```

Для внедрения контейнера динамических компонентов в шаблон пакет vue-router имеет специальный тэг `<RouterView />`:
```html
// App.vue
<template>
  <RouterView />
</template>

<script setup lang="ts">
import { RouterView } from "vue-router";
</script>
```
> Задание 4. Установить и инициализировать vue-router. Создать маршрутизацию до компонентов Upclicker и Downclicker. При изменении ссылки в адресной строке должнен изменяться отображаемый копонент

Маршрут может включать в себя переменную пути:
```ts
// index.ts
{
  path: "/order/:id",
  name: "Order",
  component: () => import("../views/Order/Order.vue")
},
```
Для получения переменной пути внутри компонента *Order.vue* можно считать информацию из маршрута:
```ts
// Order.vue
import { onMounted } from 'vue';
import { useRoute } from 'vue-router';

const route = useRoute();

onMounted(() => {
    console.log(`id: ${route.params.id}`);
})
```
> Задание 5. Модифицировать Upclicker. При монтировании компонента устанавливать начальное значение счётчика, передаваемое через переменную пути
